{"version":3,"sources":["webpack:///./test/src/js/view/movement/movementView.js","webpack:///./test/src/js/controller/movement/movementController.js","webpack:///./test/src/js/view/movement/spriteAction.js","webpack:///./test/src/js/controller/movement/mapTestController.js"],"names":[],"mappings":"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","file":"movementView.chunk.js","sourcesContent":["import MovementController from \"../../controller/movement/movementController.js\";\r\nimport MapTestController from \"../../controller/movement/mapTestController.js\";\r\n\r\nexport default {\r\n    type : \"rect\",\r\n    controller : MovementController,\r\n    style : {\r\n        x : 0,\r\n        y : 0,\r\n        width : \"100%\",\r\n        height : \"100%\",\r\n        backgroundColor : \"#fff\"\r\n    },\r\n    children : [\r\n        {\r\n            type : \"rect\",\r\n            style : {\r\n                x : 0,\r\n                y : 0,\r\n                width : \"100%\",\r\n                height : 60,\r\n                backgroundColor : \"#ccc\"\r\n            },\r\n            children : [\r\n                {\r\n                    type : \"button\",\r\n                    style : {\r\n                        width : 100,\r\n                        height : 30,\r\n                        x : 10,\r\n                        y : function(){\r\n                            return this.parent.getHeight() / 2 - this.getHeight() / 2\r\n                        },\r\n                        borderWidth : 1,\r\n                        borderColor : \"#949494\",\r\n                        backgroundColor : \"#adadad\",\r\n                        hover : {\r\n                            backgroundColor : \"#bbbbbb\"\r\n                        }\r\n                    },\r\n                    text : \"返回\",\r\n                    events : {\r\n                        \"click\" : \"back\"\r\n                    }\r\n                }\r\n            ]\r\n        },\r\n        {\r\n            type : \"rect\",\r\n            style : {\r\n                x : 0,\r\n                y : 60,\r\n                width : \"100%\",\r\n                backgroundColor : \"#f1f1f1\",\r\n                height : function(){\r\n                    return this.parent.getHeight() - 60;\r\n                }\r\n            },\r\n            children : [\r\n                {\r\n                    name : \"mapTest\",\r\n                    type : \"map\",\r\n                    controller : MapTestController,\r\n                    style : {\r\n                        x : 10,\r\n                        y : 10,\r\n                        backgroundColor : \"#dbdbdb\"\r\n                    },\r\n                    mapDataUrl : \"/src/maps/test1.map\",\r\n                    terrainPolicy : {\r\n                        \"block\" : {\r\n                            backgroundColor : \"#000000\"\r\n                        },\r\n                        1 : {\r\n                            backgroundColor : \"#94d6f1\"\r\n                        }\r\n                    },\r\n                    children : [\r\n                        {\r\n                            name : \"sprite1\",\r\n                            type : \"sprite\",\r\n                            style : {\r\n                                x : 160,\r\n                                y : 40,\r\n                                backgroundColor : \"#ff0000\"\r\n                            }\r\n                        }\r\n                    ]\r\n                }\r\n            ]\r\n        }\r\n    ]\r\n}\n\n\n// WEBPACK FOOTER //\n// ./test/src/js/view/movement/movementView.js","import {Controller} from \"../../../../../src/js/main\";\r\nimport spriteAction from \"../../view/movement/spriteAction.js\";\r\n\r\nexport default class MovementController extends Controller{\r\n    constructor(component) {\r\n        super(component);\r\n        this.currentAction = spriteAction.stay;\r\n\r\n        this.registerEvent(\"$onViewLoaded\", ()=>{\r\n            let map = this.component.getComponentByName(\"mapTest\");\r\n            this.sprite = this.component.getComponentByName(\"sprite1\");\r\n            this.sprite.status = \"stay\";\r\n            this.sprite.yAcceleration = 0.05;\r\n            const speed = 1.5;\r\n            const jumpSpeed = -4;\r\n\r\n            this.sprite.onCollision = (data)=>{\r\n                console.log(data);\r\n            };\r\n\r\n            this.setSpriteAction();\r\n\r\n            map.registerEvent(\"keydown\", (e)=>{\r\n                switch (e.keyCode)\r\n                {\r\n                    case 87 : //w\r\n                        this.sprite.ySpeed = jumpSpeed;\r\n                        break;\r\n                    case 65 : //a\r\n                        this.sprite.xSpeed = -speed;\r\n                        this.setSpriteAction(spriteAction.run);\r\n                        this.sprite.setStyle(\"mirror\", \"horizontal\");\r\n                        if (this.sprite.status === \"stay\")\r\n                        {\r\n                            this.sprite.setY(this.sprite.getY() + (spriteAction.stay.height - spriteAction.run.height) - 1);\r\n                        }\r\n                        this.sprite.status = \"run\";\r\n                        break;\r\n                    case 68 : //d\r\n                        this.sprite.xSpeed = speed;\r\n                        this.setSpriteAction(spriteAction.run);\r\n                        this.sprite.removeStyle(\"mirror\");\r\n                        if (this.sprite.status === \"stay\")\r\n                        {\r\n                            this.sprite.setY(this.sprite.getY() + (spriteAction.stay.height - spriteAction.run.height) - 1);\r\n                        }\r\n                        this.sprite.status = \"run\";\r\n                        break;\r\n                    default : break;\r\n                }\r\n            });\r\n            map.registerEvent(\"keyup\", (e)=>{\r\n                switch (e.keyCode)\r\n                {\r\n                    case 65 : //a\r\n                    case 68 : //d\r\n                        this.sprite.xSpeed = 0;\r\n                        this.setSpriteAction(spriteAction.stay);\r\n                        if (this.sprite.status === \"run\")\r\n                        {\r\n                            this.sprite.setY(this.sprite.getY() - (spriteAction.stay.height - spriteAction.run.height));\r\n                        }\r\n                        this.sprite.status = \"stay\";\r\n                        break;\r\n                    default : break;\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    setSpriteAction(action){\r\n        if (action)\r\n        {\r\n            this.currentAction = action;\r\n        }\r\n\r\n        this.sprite.setStyle({\r\n            \"width\" : this.currentAction.width,\r\n            \"height\" : this.currentAction.height,\r\n            \"backgroundImage\" : this.currentAction.backgroundImage,\r\n            \"backgroundImages\" : this.currentAction.backgroundImages,\r\n            \"backgroundImagesInterval\" : this.currentAction.backgroundImagesInterval\r\n        });\r\n    }\r\n\r\n    back(e){\r\n        console.log(e);\r\n        let mainRoute = this.viewState.getComponentById(\"mainRoute\");\r\n        mainRoute.changeRoute(\"main\", true);\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./test/src/js/controller/movement/movementController.js","export default {\r\n    stay : {\r\n        width : 24,\r\n        height : 56,\r\n        backgroundImage : \"/src/images/hero-stay.png\",\r\n        backgroundImages : [\r\n            {\r\n                clip : [0,0,24,56]\r\n            },\r\n            {\r\n                clip : [192,0,24,56]\r\n            },\r\n            {\r\n                clip : [384,0,24,56]\r\n            },\r\n            {\r\n                clip : [576,0,24,56]\r\n            }\r\n        ],\r\n        backgroundImagesInterval : 500\r\n    },\r\n    run : {\r\n        width : 48,\r\n        height : 48,\r\n        backgroundImage : \"/src/images/hero-run.png\",\r\n        backgroundImages : [\r\n            {\r\n                clip : [0,0,44,48]\r\n            },\r\n            {\r\n                clip : [192,0,48,48]\r\n            },\r\n            {\r\n                clip : [384,0,48,48]\r\n            },\r\n            {\r\n                clip : [576,0,48,48]\r\n            },\r\n            {\r\n                clip : [768,0,48,48]\r\n            },\r\n            {\r\n                clip : [0,192,48,48]\r\n            },\r\n            {\r\n                clip : [192,192,48,48]\r\n            },\r\n            {\r\n                clip : [384,192,48,48]\r\n            }\r\n        ],\r\n        backgroundImagesInterval : 500\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./test/src/js/view/movement/spriteAction.js","import {Controller} from \"../../../../../src/js/main\";\r\n\r\nexport default class MapTestController extends Controller{\r\n    constructor(component) {\r\n        super(component);\r\n    }\r\n\r\n    draw(ctx){\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./test/src/js/controller/movement/mapTestController.js"],"sourceRoot":""}